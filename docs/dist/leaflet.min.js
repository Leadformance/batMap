!function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=230)}({12:function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}n(13);var i=n(6),s=n(7);"undefined"==typeof Promise&&(n(20).enable(),window.Promise=n(22));var a=function(){function e(t,n,r){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],c=arguments.length>5&&void 0!==arguments[5]&&arguments[5],u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:function(){};o(this,e),this.domElement=s.isHTMLElement(t)?t:document.querySelector(t),this.domId=this.domElement.id||"",this.apiKey=n,this.locale=r||"en",this.provider="[No provider defined]",this.showCluster=i,this.showLabel=a,this.showPosition=c,this.map=null,this.points=[],this.markers=[],this.icons=[],this.bounds=null,this.cluster=null,this.focusInProgress=!1,this.defaultOptions={zoom:12,locationZoom:16},this.load(u)}var t,n,a;return t=e,(n=[{key:"load",value:function(e){e()}},{key:"setMapOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};this.mapOptions=i(this.defaultOptions,e),this.markersOptions=t,this.labelsOptions=n,this.clustersOptions=o}},{key:"getPoints",value:function(){return this.points}},{key:"getMarkers",value:function(){return this.markers}},{key:"getMarker",value:function(e){return"string"==typeof e&&(e=this.markers.find((function(t){return t.id===e}))),e}},{key:"getMarkerIcons",value:function(){return this.icons}},{key:"getMarkerIconByType",value:function(e){return!!this.icons[e]&&this.icons[e]}},{key:"getMarkerIconType",value:function(e){return(e=this.getMarker(e)).iconType}},{key:"getGeolocation",value:function(){return new Promise((function(e,t){navigator.geolocation?navigator.geolocation.getCurrentPosition(e,t,{maximumAge:6e4,timeout:2e4,enableHighAccuracy:!0}):t(new Error)}))}},{key:"initMap",value:function(){console.error("".concat(this.provider," has no 'initMap' method implemented."))}},{key:"setPoint",value:function(){console.error("".concat(this.provider," has no 'setPoint' method implemented."))}},{key:"clearPoints",value:function(){this.points.length=0}},{key:"addMarkers",value:function(){console.error("".concat(this.provider," has no 'addMarkers' method implemented."))}},{key:"addUserMarker",value:function(){console.error("".concat(this.provider," has no 'addUserMarker' method implemented."))}},{key:"addMarker",value:function(){console.error("".concat(this.provider," has no 'addMarker' method implemented."))}},{key:"removeMarker",value:function(){console.error("".concat(this.provider," has no 'removeMarker' method implemented."))}},{key:"removeCluster",value:function(){console.error("".concat(this.provider," has no 'removeCluster' method implemented."))}},{key:"removeAllMarkers",value:function(){var e=this;this.cluster&&this.removeCluster(),this.markers.forEach((function(t){e.removeMarker(t)}))}},{key:"setMarkerIcons",value:function(){console.error("".concat(this.provider," has no 'setMarkerIcons' method implemented."))}},{key:"setIconOnMarker",value:function(){console.error("".concat(this.provider," has no 'setIconOnMarker' method implemented."))}},{key:"focusOnMarker",value:function(){console.error("".concat(this.provider," has no 'focusOnMarker' method implemented."))}},{key:"addCluster",value:function(){console.error("".concat(this.provider," has no 'addCluster' method implemented."))}},{key:"makeLatLng",value:function(){console.error("".concat(this.provider," has no 'makeLatLng' method implemented."))}},{key:"setCenter",value:function(){console.error("".concat(this.provider," has no 'setCenter' method implemented."))}},{key:"getCenterLatLng",value:function(){console.error("".concat(this.provider," has no 'getCenterLatLng' method implemented."))}},{key:"fitBounds",value:function(){console.error("".concat(this.provider," has no 'fitBounds' method implemented."))}},{key:"extendBounds",value:function(){console.error("".concat(this.provider," has no 'extendBounds' method implemented."))}},{key:"getBounds",value:function(){console.error("".concat(this.provider," has no 'getBounds' method implemented."))}},{key:"getBoundsLatLng",value:function(){console.error("".concat(this.provider," has no 'getBoundsLatLng' method implemented."))}},{key:"panTo",value:function(){console.error("".concat(this.provider," has no 'panTo' method implemented."))}},{key:"getZoom",value:function(){console.error("".concat(this.provider," has no 'getZoom' method implemented."))}},{key:"setZoom",value:function(){console.error("".concat(this.provider," has no 'setZoom' method implemented."))}},{key:"listenZoomChange",value:function(){console.error("".concat(this.provider," has no 'listenZoomChange' method implemented."))}},{key:"listenBoundsChange",value:function(){console.error("".concat(this.provider," has no 'listenBoundsChange' method implemented."))}},{key:"minifyMarkerIcons",value:function(){console.error("".concat(this.provider," has no 'minifyMarkerIcons' method implemented."))}}])&&r(t.prototype,n),a&&r(t,a),e}();e.exports=a},13:function(e,t,n){var o=n(14);"string"==typeof o&&(o=[[e.i,o,""]]);n(16)(o,{});o.locals&&(e.exports=o.locals)},14:function(e,t,n){(e.exports=n(15)()).push([e.i,"@keyframes scaleout{0%{transform:scale(0)}100%{transform:scale(1);opacity:0}}.batmap__spinner{position:absolute;top:0;right:0;bottom:0;left:0;content:'';width:50px;height:50px;margin:auto;padding:50px 0 0 50px;background-color:#333;border-radius:100%;animation:scaleout 1s infinite ease-in-out}.batmap__map{position:relative;z-index:0}.batmap-mappy .mappy-control-zoom a span{position:relative;top:-5px}.batmap-mappy .leaflet-control.leaflet-control-attribution,.batmap-mappy .leaflet-control.leaflet-control-scale{padding:0 5px}.batmap-leaflet.leaflet-touch .leaflet-bar a{line-height:26px}",""])},15:function(e,t){e.exports=function(){var e=[];return e.toString=function(){for(var e=[],t=0;t<this.length;t++){var n=this[t];n[2]?e.push("@media "+n[2]+"{"+n[1]+"}"):e.push(n[1])}return e.join("")},e.i=function(t,n){"string"==typeof t&&(t=[[null,t,""]]);for(var o={},r=0;r<this.length;r++){var i=this[r][0];"number"==typeof i&&(o[i]=!0)}for(r=0;r<t.length;r++){var s=t[r];"number"==typeof s[0]&&o[s[0]]||(n&&!s[2]?s[2]=n:n&&(s[2]="("+s[2]+") and ("+n+")"),e.push(s))}},e}},16:function(e,t){var n={},o=function(e){var t;return function(){return void 0===t&&(t=e.apply(this,arguments)),t}},r=o((function(){return/msie [6-9]\b/.test(window.navigator.userAgent.toLowerCase())})),i=o((function(){return document.head||document.getElementsByTagName("head")[0]})),s=null,a=0;function c(e,t){for(var o=0;o<e.length;o++){var r=e[o],i=n[r.id];if(i){i.refs++;for(var s=0;s<i.parts.length;s++)i.parts[s](r.parts[s]);for(;s<r.parts.length;s++)i.parts.push(f(r.parts[s],t))}else{var a=[];for(s=0;s<r.parts.length;s++)a.push(f(r.parts[s],t));n[r.id]={id:r.id,refs:1,parts:a}}}}function u(e){for(var t=[],n={},o=0;o<e.length;o++){var r=e[o],i=r[0],s={css:r[1],media:r[2],sourceMap:r[3]};n[i]?n[i].parts.push(s):t.push(n[i]={id:i,parts:[s]})}return t}function l(){var e=document.createElement("style"),t=i();return e.type="text/css",t.appendChild(e),e}function f(e,t){var n,o,r,c,u;if(t.singleton){var f=a++;n=s||(s=l()),o=h.bind(null,n,f,!1),r=h.bind(null,n,f,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(c=document.createElement("link"),u=i(),c.rel="stylesheet",u.appendChild(c),n=c,o=y.bind(null,n),r=function(){n.parentNode.removeChild(n),n.href&&URL.revokeObjectURL(n.href)}):(n=l(),o=m.bind(null,n),r=function(){n.parentNode.removeChild(n)});return o(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;o(e=t)}else r()}}e.exports=function(e,t){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");void 0===(t=t||{}).singleton&&(t.singleton=r());var o=u(e);return c(o,t),function(e){for(var r=[],i=0;i<o.length;i++){var s=o[i];(a=n[s.id]).refs--,r.push(a)}e&&c(u(e),t);for(i=0;i<r.length;i++){var a;if(0===(a=r[i]).refs){for(var l=0;l<a.parts.length;l++)a.parts[l]();delete n[a.id]}}}};var p,d=(p=[],function(e,t){return p[e]=t,p.filter(Boolean).join("\n")});function h(e,t,n,o){var r=n?"":o.css;if(e.styleSheet)e.styleSheet.cssText=d(t,r);else{var i=document.createTextNode(r),s=e.childNodes;s[t]&&e.removeChild(s[t]),s.length?e.insertBefore(i,s[t]):e.appendChild(i)}}function m(e,t){var n=t.css,o=t.media;t.sourceMap;if(o&&e.setAttribute("media",o),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}function y(e,t){var n=t.css,o=(t.media,t.sourceMap);o&&(n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+" */");var r=new Blob([n],{type:"text/css"}),i=e.href;e.href=URL.createObjectURL(r),i&&URL.revokeObjectURL(i)}},17:function(e,t,n){"use strict";e.exports={delete:function(e,t){try{delete e[t]}catch(n){e[t]=void 0}},addEventListener:function(e,t,n,o){e.addEventListener?e.addEventListener(t,n,o):e.attachEvent("on"+t,n)},addLoadListener:function(e,t){e.onreadystatechange=function(){"complete"===this.readyState&&t()},e.onload=t}}},18:function(e,t,n){"use strict";e.exports={isAString:function(e){return"string"==typeof e},isAFunction:function(e){return"function"==typeof e}}},19:function(e,t,n){!function(e){"use strict";var t=e.isEmpty=function(e){return void 0===e||(null===e||(!!p(e)||(""===e||0!==e&&(!1!==e&&(!d(e)&&(!m(e)&&(!!g(e)||!!f(e))))))))},n=e.isNotEmpty=function(e){return!t(e)},o=e.isDefined=function(e){return void 0!==e&&(null!==e&&(!p(e)&&(""===e||0===e||!1===e||v(e)||u(e),!0)))},r=e.isNotDefined=function(e){return!o(e)},i=(e.isTrue=function(e){return!0===e||(1===e||(!(!e||"string"!=typeof e||"true"!==e.toLowerCase())||!(!e||"string"!=typeof e||"t"!==e.toLowerCase())))},e.isFalse=function(e){return!1===e||(0===e||(!(!e||"string"!=typeof e||"false"!==e.toLowerCase())||!(!e||"string"!=typeof e||"f"!==e.toLowerCase())))},e.assertIsDefined=function(e,t){if(r(t))throw new Error(e+" is not defined.")},e.assertIsNotDefined=function(e,t){if(o(t))throw new Error(e+" is defined.")},e.assertIsNotEmpty=function(e,n){if(t(n))throw new Error(e+" is empty.")},e.assertIsEmpty=function(e,t){if(n(t))throw new Error(e+" is not empty.")},e.validateFunctionInputsAreDefined=function(e,t,n){return s(e,t,"fnInputs",n)}),s=e.validateInputsAreDefined=function(e,n,o,i){if(i+=" validateInputsAreDefined ",t(e))throw new Error(i+o+" must not be empty");if(!u(n))throw new Error(i+"inputsToValidate must be an array");for(var s=0;s<n.length;s++){var a=n[s],c=b(e,a);if(r(c))throw new Error(i+"following input must be defined: "+o+"."+a)}},a=(e.validateFunctionInputsAreDefinedAsync=function(e,t,n,o){try{return i(e,t,n),o(null,"done")}catch(e){return o(e,null)}},e.validateFunctionInputsAreDefinedCallbackOnError=function(e,t,n,o){try{return void i(e,t,n)}catch(e){return o(e,null)}},e.validateInputsAreDefinedAsync=function(e,t,n,o,r){try{return s(e,t,n,o),r(null,"done")}catch(e){return r(e,null)}},e.validateInputsAreDefinedCallbackOnError=function(e,t,n,o,r){try{return void s(e,t,n,o)}catch(e){return r(e,null)}},e.validateFunctionInputsAreNotEmpty=function(e,t,n){return c(e,t,"fnInputs",n)}),c=e.validateInputsAreNotEmpty=function(e,n,o,r){if(r+=" validateInputsAreNotEmpty ",t(e))throw new Error(r+o+" must not be empty");if(!u(n))throw new Error(r+"inputsToValidate must be an array");for(var i=0;i<n.length;i++){var s=n[i],a=b(e,s);if(t(a))throw new Error(r+"following input must not be empty: "+o+"."+s)}},u=(e.validateFunctionInputsAreNotEmptyAsync=function(e,t,n,o){try{return a(e,t,n),o(null,"done")}catch(e){return o(e,null)}},e.validateFunctionInputsAreNotEmptyCallbackOnError=function(e,t,n,o){try{return void a(e,t,n)}catch(e){return o(e,null)}},e.validateInputsAreNotEmptyAsync=function(e,t,n,o,r){try{return c(e,t,n,o),r(null,"done")}catch(e){return r(e,null)}},e.validateInputsAreNotEmptyCallbackOnError=function(e,t,n,o,r){try{return void c(e,t,n,o)}catch(e){return r(e,null)}},e.isArray=function(e){return!!(e&&"object"==typeof e&&void 0!==e.length&&e.length>=0)}),l=e.isNotArray=function(e){return!u(e)},f=e.isEmptyArray=function(e){return!(!u(e)||void 0===e.length||0!==e.length)},p=(e.isNotEmptyArray=function(e){return!!(u(e)&&void 0!==e.length&&e.length>0)},e.isNAN=function(e){return!("number"!=typeof e||!isNaN(e))}),d=e.isDate=function(e){return"object"==typeof e&&"[object Date]"===Object.prototype.toString.call(e)},h=e.isNotDate=function(e){return!d(e)},m=e.isError=function(e){return"object"==typeof e&&"[object Error]"===Object.prototype.toString.call(e)},y=e.isNotError=function(e){return!m(e)},v=e.isObject=function(e){return!!(e&&"object"==typeof e&&l(e)&&h(e)&&y(e))},g=(e.isNotObject=function(e){return!v(e)},e.isEmptyObject=function(e){return!(!v(e)||0!==Object.keys(e).length)}),b=(e.isNotEmptyObject=function(e){return!!(v(e)&&Object.keys(e).length>0)},e.getPropertyByString=function(e,n){if(t(n))return e;var o,r=n.split("."),i=r.length-1,s=0;for(s=0;s<i&&(o=r[s],"object"==typeof e&&null!==e&&o in e);s++)e=e[o];return e[r[s]]}),k=(e.setPropertyByString=function(e,n,o){if(t(n))return e;var r,i=n.split("."),s=i.length-1;if(0===s)e[n]=o;else{for(var a=0;a<=s-1;a++)r=i[a],"object"==typeof e&&null!==e&&r in e||(e[r]={}),e=e[r];r=i[a],"object"==typeof e&&null!==e&&(e[r]=o)}},e.assertNestedListIsDefined=function(e){return!l(e)&&(e.forEach((function(e){k.apply(null,e)})),!0)},e.assertNestedIsDefined=function(e,t){for(var n=Array.prototype.slice.call(arguments,2),o=0;o<n.length;o++){if(!e)throw new Error(t+" is not defined.");if(!e.hasOwnProperty(n[o])||r(e[n[o]]))throw new Error(t+"."+n[o]+" is not defined.");e=e[n[o]],t=t+"."+n[o]}return!0})}(t)},2:function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},20:function(e,t,n){"use strict";var o=n(8),r=[ReferenceError,TypeError,RangeError],i=!1;function s(){i=!1,o._Y=null,o._Z=null}function a(e,t){return t.some((function(t){return e instanceof t}))}t.disable=s,t.enable=function(e){e=e||{},i&&s();i=!0;var t=0,n=0,c={};function u(t){(e.allRejections||a(c[t].error,e.whitelist||r))&&(c[t].displayId=n++,e.onUnhandled?(c[t].logged=!0,e.onUnhandled(c[t].displayId,c[t].error)):(c[t].logged=!0,function(e,t){console.warn("Possible Unhandled Promise Rejection (id: "+e+"):"),((t&&(t.stack||t))+"").split("\n").forEach((function(e){console.warn("  "+e)}))}(c[t].displayId,c[t].error)))}o._Y=function(t){2===t._V&&c[t._1]&&(c[t._1].logged?function(t){c[t].logged&&(e.onHandled?e.onHandled(c[t].displayId,c[t].error):c[t].onUnhandled||(console.warn("Promise Rejection Handled (id: "+c[t].displayId+"):"),console.warn('  This means you can ignore any previous messages of the form "Possible Unhandled Promise Rejection" with id '+c[t].displayId+".")))}(t._1):clearTimeout(c[t._1].timeout),delete c[t._1])},o._Z=function(e,n){0===e._U&&(e._1=t++,c[e._1]={displayId:null,error:n,timeout:setTimeout(u.bind(null,e._1),a(n,r)?100:2e3),logged:!1})}}},21:function(e,t,n){"use strict";(function(t){function n(e){r.length||(o(),!0),r[r.length]=e}e.exports=n;var o,r=[],i=0;function s(){for(;i<r.length;){var e=i;if(i+=1,r[e].call(),i>1024){for(var t=0,n=r.length-i;t<n;t++)r[t]=r[t+i];r.length-=i,i=0}}r.length=0,i=0,!1}var a,c,u,l=void 0!==t?t:self,f=l.MutationObserver||l.WebKitMutationObserver;function p(e){return function(){var t=setTimeout(o,0),n=setInterval(o,50);function o(){clearTimeout(t),clearInterval(n),e()}}}"function"==typeof f?(a=1,c=new f(s),u=document.createTextNode(""),c.observe(u,{characterData:!0}),o=function(){a=-a,u.data=a}):o=p(s),n.requestFlush=o,n.makeRequestCallFromTimer=p}).call(this,n(2))},22:function(e,t,n){"use strict";var o=n(8);e.exports=o;var r=l(!0),i=l(!1),s=l(null),a=l(void 0),c=l(0),u=l("");function l(e){var t=new o(o._0);return t._V=1,t._W=e,t}o.resolve=function(e){if(e instanceof o)return e;if(null===e)return s;if(void 0===e)return a;if(!0===e)return r;if(!1===e)return i;if(0===e)return c;if(""===e)return u;if("object"==typeof e||"function"==typeof e)try{var t=e.then;if("function"==typeof t)return new o(t.bind(e))}catch(e){return new o((function(t,n){n(e)}))}return l(e)};var f=function(e){return"function"==typeof Array.from?(f=Array.from,Array.from(e)):(f=function(e){return Array.prototype.slice.call(e)},Array.prototype.slice.call(e))};o.all=function(e){var t=f(e);return new o((function(e,n){if(0===t.length)return e([]);var r=t.length;function i(s,a){if(a&&("object"==typeof a||"function"==typeof a)){if(a instanceof o&&a.then===o.prototype.then){for(;3===a._V;)a=a._W;return 1===a._V?i(s,a._W):(2===a._V&&n(a._W),void a.then((function(e){i(s,e)}),n))}var c=a.then;if("function"==typeof c)return void new o(c.bind(a)).then((function(e){i(s,e)}),n)}t[s]=a,0==--r&&e(t)}for(var s=0;s<t.length;s++)i(s,t[s])}))},o.reject=function(e){return new o((function(t,n){n(e)}))},o.race=function(e){return new o((function(t,n){f(e).forEach((function(e){o.resolve(e).then(t,n)}))}))},o.prototype.catch=function(e){return this.then(null,e)}},23:function(e,t,n){"use strict";e.exports={addLoader:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=document.createElement("div");return o.className="string"==typeof n?n:"batmap__spinner",e.appendChild(o),function(){e.removeChild(o),t()}}}},230:function(e,t,n){"use strict";function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=u(e);if(t){var r=u(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return c(this,n)}}function c(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var l,f=n(12),p=n(7),d=n(23),h=n(6),m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(u,e);var t,n,o,c=a(u);function u(){var e;r(this,u);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return(e=c.call.apply(c,[this].concat(n))).provider="Leaflet",e}return t=u,(n=[{key:"load",value:function(e){var t=this;this.domElement.classList.add("batmap__map","batmap-leaflet"),window.L?e():(e=d.addLoader(this.domElement,e),p.addResources(document.head,[p.createStyle("//unpkg.com/leaflet@1.5.1/dist/leaflet.css"),p.createScript("//unpkg.com/leaflet@1.5.1/dist/leaflet.js")],(function(){var n=[];t.showCluster&&(n.push(p.createStyle("//unpkg.com/leaflet.markercluster@1.1.0/dist/MarkerCluster.css")),n.push(p.createStyle("//unpkg.com/leaflet.markercluster@1.1.0/dist/MarkerCluster.Default.css")),n.push(p.createScript("//unpkg.com/leaflet.markercluster@1.1.0/dist/leaflet.markercluster.js"))),p.addResources(document.head,n,(function(){l=window.L,e()}))})))}},{key:"setMapOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};this.mapOptions=h({center:[0,0],zoom:12,locationZoom:16,tileLayerProvider:"//{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",tileLayerOptions:{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a>',maxZoom:19}},e),this.markersOptions=t,this.labelsOptions=n,this.clustersOptions=o}},{key:"initMap",value:function(){this.bounds=new l.latLngBounds([]),this.map=l.map(this.domElement,this.mapOptions),l.tileLayer(this.mapOptions.tileLayerProvider,this.mapOptions.tileLayerOptions).addTo(this.map)}},{key:"setPoint",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o={position:l.latLng(e.localisation.coordinates.latitude,e.localisation.coordinates.longitude),id:"".concat(e._id),location:e,iconType:t};this.showLabel&&n&&(o.label="".concat(n)),this.points.push(o)}},{key:"addMarkers",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.showCluster&&this.icons.cluster&&this.addCluster(),[].forEach.call(this.points,(function(n){e.addMarker(n,t)}))}},{key:"addMarker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=l.marker(e.position,e);n.id=e.id,n.location=e.location,n.options.alt="marker "+e.location.name,this.showCluster&&this.icons.cluster?this.cluster.addLayer(n):n.addTo(this.map),[].forEach.call(Object.keys(t),(function(e){var o=t[e];n.on(e,o(n))})),this.extendBounds(n.getLatLng()),this.markers.push(n),this.setIconOnMarker(n,e.iconType)}},{key:"removeMarker",value:function(e){(e=this.getMarker(e)).removeFrom(this.map),this.markers=this.markers.filter((function(t){return t.id!==e.id}))}},{key:"removeCluster",value:function(){this.cluster.remove()}},{key:"setMarkerIcons",value:function(){var e=this;Object.keys(this.markersOptions).forEach((function(t){var n=e.markersOptions[t],o=n.anchor||[n.width/2,n.height],r=n.label||{};e.icons[t]=new l.Icon({className:"batmap-marker-".concat(t),iconUrl:n.url,iconSize:[n.width,n.height],iconAnchor:o,labelOptions:e.getLabelOptions(r)})}))}},{key:"getLabelOptions",value:function(e){return{origin:e.origin||this.labelsOptions.origin||[e.width/2,e.height/2],color:e.color||this.labelsOptions.color,font:e.font||this.labelsOptions.font,size:e.size||this.labelsOptions.size,weight:e.weight||this.labelsOptions.weight}}},{key:"setIconOnMarker",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];e=this.getMarker(e);var o=this.icons[t];if(e&&o)if(e.iconType=t,this.showLabel&&n){var r=o.options.labelOptions,i=document.createElement("span");i.innerText=e.options.label,i.style.position="absolute",i.style.top="".concat(r.origin[0],"px"),i.style.left="".concat(r.origin[1],"px"),i.style.transform="translate(-50%, -50%)",i.style.color="".concat(r.color),i.style.fontFamily="".concat(r.font),i.style.fontWeight="".concat(r.weight),i.style.fontSize="".concat(r.size,"px"),e.setIcon(new l.DivIcon({className:o.options.className,iconSize:o.options.iconSize,iconAnchor:o.options.iconAnchor,html:'<img src="'.concat(o.options.iconUrl,'" class="map-marker-').concat(t,'__image" alt="').concat(e.options.alt,'">').concat(i.outerHTML)}))}else e.setIcon(o)}},{key:"focusOnMarker",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{x:0,y:0};this.focusInProgress=!0;var o=n.x||n.y;e=this.getMarker(e);var r=function e(){o?(o=!1,t.map.panBy(new l.Point(n.x,n.y))):(t.focusInProgress=!1,t.map.off("moveend",e,t))};this.map.on("moveend",r,this),this.panTo(e.getLatLng())}},{key:"addUserMarker",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(e){var o=e.latitude&&e.longitude?this.makeLatLng(e.latitude,e.longitude):e;this.userMarker=new l.marker(o),this.userMarker.id=n,this.userMarker.addTo(this.map),this.setIconOnMarker(this.userMarker,t,!1),this.extendBounds(this.userMarker.getLatLng())}}},{key:"addCluster",value:function(){var e=this.icons.cluster;this.cluster=l.markerClusterGroup(h({showCoverageOnHover:!1,zoomToBoundsOnClick:!0,spiderfyOnMaxZoom:!0,iconCreateFunction:function(t){var n=e.options.labelOptions,o=document.createElement("span");return o.innerText=t.getChildCount(),o.style.position="absolute",o.style.top="".concat(n.origin[0],"px"),o.style.left="".concat(n.origin[1],"px"),o.style.transform="translate(-50%, -50%)",o.style.color="".concat(n.color),o.style.fontFamily="".concat(n.font),o.style.fontWeight="".concat(n.weight),o.style.fontSize="".concat(n.size,"px"),l.divIcon({className:e.options.className,html:'<img src="'.concat(e.options.iconUrl,'" class="map-marker-cluster__image" alt="marker cluster (').concat(t.getChildCount(),')">')+o.outerHTML,iconSize:e.options.iconSize})}},this.clustersOptions)),this.map.addLayer(this.cluster)}},{key:"getZoom",value:function(){return this.map.getZoom()}},{key:"setZoom",value:function(e){this.map.setZoom(e)}},{key:"makeLatLng",value:function(e,t){return l.latLng(e,t)}},{key:"setCenter",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.mapOptions.zoom;this.map.setView(e,t)}},{key:"getCenterLatLng",value:function(){return this.map.getCenter()}},{key:"getBounds",value:function(){return this.bounds}},{key:"getBoundsLatLng",value:function(){var e=this.map.getBounds(),t=e.getNorthEast(),n=e.getSouthWest();return[n.lat,n.lng,t.lat,t.lng]}},{key:"extendBounds",value:function(e){return this.bounds.extend(e)}},{key:"fitBounds",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.mapOptions.zoom,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50,o={maxZoom:t};isNaN(n)?(o.paddingTopLeft=l.point(n.left||0,n.top||0),o.paddingBottomRight=l.point(n.right||0,n.bottom||0)):o.padding=l.point(n,n),this.map.fitBounds(e,o)}},{key:"panTo",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.mapOptions.locationZoom;this.map.flyTo(e,t)}},{key:"panBy",value:function(e,t){this.map.panBy(l.point(e,t))}},{key:"listenZoomChange",value:function(e){var t=this;this.map.on("zoomend",(function(){return e(t.map.getZoom())}))}},{key:"listenBoundsChange",value:function(e){var t=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.map.on("move",(function(){if(!n||!t.focusInProgress)return e(t.getCenterLatLng())}))}},{key:"minifyMarkerIcons",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.8;e<n+1&&!this.isMinifiedMarkerIcons?([].forEach.call(Object.keys(this.icons),(function(e){var n=t.icons[e].options.iconSize,r=n[0]*o,i=n[1]*o;t.icons[e].options.iconSize=[r,i],t.icons[e].options.iconAnchor=[r/2,i]})),this.refreshAllMarkers(),this.isMinifiedMarkerIcons=!0):e>n&&this.isMinifiedMarkerIcons&&([].forEach.call(Object.keys(this.icons),(function(e){var n=t.icons[e].options.iconSize,r=n[0]/o,i=n[1]/o;t.icons[e].options.iconSize=[r,i],t.icons[e].options.iconAnchor=[r/2,i]})),this.refreshAllMarkers(),this.isMinifiedMarkerIcons=!1)}},{key:"refreshAllMarkers",value:function(){var e=this;this.getMarkers().forEach((function(t){var n=e.getMarkerIconType(t);t.setIcon(e.icons[n])})),this.userMarker&&this.userMarker.setIcon(this.icons.user)}}])&&i(t.prototype,n),o&&i(t,o),u}(f);window.LeafletMap=m,window.BatMap=m},6:function(e,t,n){"use strict";var o=Object.prototype.propertyIsEnumerable;function r(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function i(e){var t=Object.getOwnPropertyNames(e);return Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(e))),t.filter((function(t){return o.call(e,t)}))}e.exports=Object.assign||function(e,t){for(var n,o,s=r(e),a=1;a<arguments.length;a++){n=arguments[a],o=i(Object(n));for(var c=0;c<o.length;c++)s[o[c]]=n[o[c]]}return s}},7:function(e,t,n){"use strict";function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var r,i,s=n(17),a=n(18).isAString,c=n(19).isDefined;function u(e){if(!0===a(e)){var t=e.replace("px","").replace('"',""),n=parseInt(t);return isFinite(n)?n:0}return 0}e.exports={addScript:function(e,t){e.appendChild(this.createScript(t))},addStyle:function(e,t){e.appendChild(this.createStyle(t))},addResources:function(e,t,n){var o=0;0===t.length&&n(),t.forEach((function(r){s.addLoadListener(r,(function(){++o===t.length&&n()})),e.appendChild(r)}))},createScript:function(e){var t=document.createElement("script");return t.type="text/javascript",t.src=e,t.async=!0,t},createStyle:function(e){var t=document.createElement("link");return t.rel="stylesheet",t.href=e,t},isHTMLElement:function(e){return e&&"object"===o(e)&&null!==e&&1===e.nodeType&&"string"==typeof e.nodeName},extractTextAndCssClasses:function(e){var t=document.createElement("div");t.innerHTML=e;var n=t.textContent||t.innerText||"",o="";return c(t.firstChild)&&(o=t.firstChild.className),{textContent:n,classes:o}},getStyleFromCss:(r=function(e){var t=document.createElement("div");t.className=e,document.body.appendChild(t);var n=window.getComputedStyle(t),o={top:u(n.top),left:u(n.left)};return document.body.removeChild(t),o},i={},function(e){if(e in i)return i[e];try{var t=r(e);return i[e]=t,t}catch(e){return console.log(e),null}})}},8:function(e,t,n){"use strict";var o=n(21);function r(){}var i=null,s={};function a(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("Promise constructor's argument is not a function");this._U=0,this._V=0,this._W=null,this._X=null,e!==r&&d(e,this)}function c(e,t){for(;3===e._V;)e=e._W;if(a._Y&&a._Y(e),0===e._V)return 0===e._U?(e._U=1,void(e._X=t)):1===e._U?(e._U=2,void(e._X=[e._X,t])):void e._X.push(t);!function(e,t){o((function(){var n=1===e._V?t.onFulfilled:t.onRejected;if(null!==n){var o=function(e,t){try{return e(t)}catch(e){return i=e,s}}(n,e._W);o===s?l(t.promise,i):u(t.promise,o)}else 1===e._V?u(t.promise,e._W):l(t.promise,e._W)}))}(e,t)}function u(e,t){if(t===e)return l(e,new TypeError("A promise cannot be resolved with itself."));if(t&&("object"==typeof t||"function"==typeof t)){var n=function(e){try{return e.then}catch(e){return i=e,s}}(t);if(n===s)return l(e,i);if(n===e.then&&t instanceof a)return e._V=3,e._W=t,void f(e);if("function"==typeof n)return void d(n.bind(t),e)}e._V=1,e._W=t,f(e)}function l(e,t){e._V=2,e._W=t,a._Z&&a._Z(e,t),f(e)}function f(e){if(1===e._U&&(c(e,e._X),e._X=null),2===e._U){for(var t=0;t<e._X.length;t++)c(e,e._X[t]);e._X=null}}function p(e,t,n){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=n}function d(e,t){var n=!1,o=function(e,t,n){try{e(t,n)}catch(e){return i=e,s}}(e,(function(e){n||(n=!0,u(t,e))}),(function(e){n||(n=!0,l(t,e))}));n||o!==s||(n=!0,l(t,i))}e.exports=a,a._Y=null,a._Z=null,a._0=r,a.prototype.then=function(e,t){if(this.constructor!==a)return function(e,t,n){return new e.constructor((function(o,i){var s=new a(r);s.then(o,i),c(e,new p(t,n,s))}))}(this,e,t);var n=new a(r);return c(this,new p(e,t,n)),n}}});
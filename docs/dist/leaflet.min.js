!function(t){var e={};function n(o){if(e[o])return e[o].exports;var r=e[o]={i:o,l:!1,exports:{}};return t[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(o,r,function(e){return t[e]}.bind(null,r));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=21)}([function(t,e,n){"use strict";var o=Object.prototype.propertyIsEnumerable;function r(t){var e=Object.getOwnPropertyNames(t);return Object.getOwnPropertySymbols&&(e=e.concat(Object.getOwnPropertySymbols(t))),e.filter(function(e){return o.call(t,e)})}t.exports=Object.assign||function(t,e){for(var n,o,i=function(t){if(null==t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}(t),s=1;s<arguments.length;s++){n=arguments[s],o=r(Object(n));for(var a=0;a<o.length;a++)i[o[a]]=n[o[a]]}return i}},function(t,e,n){"use strict";function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var r,i,s=n(8),a=n(9).isAString,c=n(10).isDefined;function u(t){if(!0===a(t)){var e=t.replace("px","").replace('"',""),n=parseInt(e);return isFinite(n)?n:0}return 0}t.exports={addScript:function(t,e){t.appendChild(this.createScript(e))},addStyle:function(t,e){t.appendChild(this.createStyle(e))},addResources:function(t,e,n){var o=0;0===e.length&&n(),e.forEach(function(r){s.addLoadListener(r,function(){++o===e.length&&n()}),t.appendChild(r)})},createScript:function(t){var e=document.createElement("script");return e.type="text/javascript",e.src=t,e.async=!0,e},createStyle:function(t){var e=document.createElement("link");return e.rel="stylesheet",e.href=t,e},isHTMLElement:function(t){return t&&"object"===o(t)&&null!==t&&1===t.nodeType&&"string"==typeof t.nodeName},extractTextAndCssClasses:function(t){var e=document.createElement("div");e.innerHTML=t;var n=e.textContent||e.innerText||"",o="";return c(e.firstChild)&&(o=e.firstChild.className),{textContent:n,classes:o}},getStyleFromCss:(r=function(t){var e=document.createElement("div");e.className=t,document.body.appendChild(e);var n=window.getComputedStyle(e),o={top:u(n.top),left:u(n.left)};return document.body.removeChild(e),o},i={},function(t){if(t in i)return i[t];try{var e=r(t);return i[t]=e,e}catch(t){return console.log(t),null}})}},function(t,e,n){"use strict";var o=n(12);function r(){}var i=null,s={};function a(t){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("Promise constructor's argument is not a function");this._h=0,this._i=0,this._j=null,this._k=null,t!==r&&d(t,this)}function c(t,e){for(;3===t._i;)t=t._j;if(a._l&&a._l(t),0===t._i)return 0===t._h?(t._h=1,void(t._k=e)):1===t._h?(t._h=2,void(t._k=[t._k,e])):void t._k.push(e);!function(t,e){o(function(){var n=1===t._i?e.onFulfilled:e.onRejected;if(null!==n){var o=function(t,e){try{return t(e)}catch(t){return i=t,s}}(n,t._j);o===s?l(e.promise,i):u(e.promise,o)}else 1===t._i?u(e.promise,t._j):l(e.promise,t._j)})}(t,e)}function u(t,e){if(e===t)return l(t,new TypeError("A promise cannot be resolved with itself."));if(e&&("object"==typeof e||"function"==typeof e)){var n=function(t){try{return t.then}catch(t){return i=t,s}}(e);if(n===s)return l(t,i);if(n===t.then&&e instanceof a)return t._i=3,t._j=e,void f(t);if("function"==typeof n)return void d(n.bind(e),t)}t._i=1,t._j=e,f(t)}function l(t,e){t._i=2,t._j=e,a._m&&a._m(t,e),f(t)}function f(t){if(1===t._h&&(c(t,t._k),t._k=null),2===t._h){for(var e=0;e<t._k.length;e++)c(t,t._k[e]);t._k=null}}function p(t,e,n){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.promise=n}function d(t,e){var n=!1,o=function(t,e,n){try{t(e,n)}catch(t){return i=t,s}}(t,function(t){n||(n=!0,u(e,t))},function(t){n||(n=!0,l(e,t))});n||o!==s||(n=!0,l(e,i))}t.exports=a,a._l=null,a._m=null,a._n=r,a.prototype.then=function(t,e){if(this.constructor!==a)return function(t,e,n){return new t.constructor(function(o,i){var s=new a(r);s.then(o,i),c(t,new p(e,n,s))})}(this,t,e);var n=new a(r);return c(this,new p(t,e,n)),n}},function(t,e,n){"use strict";function o(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}n(4);var r=n(0),i=n(1);"undefined"==typeof Promise&&(n(11).enable(),window.Promise=n(14));var s=function(){function t(e,n,o){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=arguments.length>5&&void 0!==arguments[5]&&arguments[5],c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:function(){};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.domElement=i.isHTMLElement(e)?e:document.querySelector(e),this.domId=this.domElement.id||"",this.apiKey=n,this.locale=o||"en",this.provider="[No provider defined]",this.showCluster=r,this.showLabel=s,this.showPosition=a,this.map=null,this.points=[],this.markers=[],this.icons=[],this.bounds=null,this.cluster=null,this.defaultOptions={zoom:12,locationZoom:16},this.load(c)}var e,n,s;return e=t,(n=[{key:"load",value:function(t){t()}},{key:"setMapOptions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};this.mapOptions=r(this.defaultOptions,t),this.markersOptions=e,this.labelsOptions=n,this.clustersOptions=o}},{key:"getPoints",value:function(){return this.points}},{key:"getMarkers",value:function(){return this.markers}},{key:"getMarker",value:function(t){return"string"==typeof t&&(t=this.markers.find(function(e){return e.id===t})),t}},{key:"getMarkerIcons",value:function(){return this.icons}},{key:"getMarkerIconByType",value:function(t){return!!this.icons[t]&&this.icons[t]}},{key:"getMarkerIconType",value:function(t){return(t=this.getMarker(t)).iconType}},{key:"getGeolocation",value:function(){return new Promise(function(t,e){navigator.geolocation?navigator.geolocation.getCurrentPosition(t,e,{maximumAge:6e4,timeout:2e4,enableHighAccuracy:!0}):e(new Error)})}},{key:"initMap",value:function(){console.error("".concat(this.provider," has no 'initMap' method implemented."))}},{key:"setPoint",value:function(){console.error("".concat(this.provider," has no 'setPoint' method implemented."))}},{key:"addMarkers",value:function(){console.error("".concat(this.provider," has no 'addMarkers' method implemented."))}},{key:"addUserMarker",value:function(){console.error("".concat(this.provider," has no 'addUserMarker' method implemented."))}},{key:"addMarker",value:function(){console.error("".concat(this.provider," has no 'addMarker' method implemented."))}},{key:"removeMarker",value:function(){console.error("".concat(this.provider," has no 'removeMarker' method implemented."))}},{key:"setMarkerIcons",value:function(){console.error("".concat(this.provider," has no 'setMarkerIcons' method implemented."))}},{key:"setIconOnMarker",value:function(){console.error("".concat(this.provider," has no 'setIconOnMarker' method implemented."))}},{key:"focusOnMarker",value:function(){console.error("".concat(this.provider," has no 'focusOnMarker' method implemented."))}},{key:"addCluster",value:function(){console.error("".concat(this.provider," has no 'addCluster' method implemented."))}},{key:"setCenter",value:function(){console.error("".concat(this.provider," has no 'setCenter' method implemented."))}},{key:"fitBounds",value:function(){console.error("".concat(this.provider," has no 'fitBounds' method implemented."))}},{key:"extendBounds",value:function(){console.error("".concat(this.provider," has no 'extendBounds' method implemented."))}},{key:"getBounds",value:function(){console.error("".concat(this.provider," has no 'getBounds' method implemented."))}},{key:"panTo",value:function(){console.error("".concat(this.provider," has no 'panTo' method implemented."))}},{key:"setZoom",value:function(){console.error("".concat(this.provider," has no 'setZoom' method implemented."))}},{key:"listenZoomChange",value:function(){console.error("".concat(this.provider," has no 'listenZoomChange' method implemented."))}},{key:"minifyMarkerIcons",value:function(){console.error("".concat(this.provider," has no 'minifyMarkerIcons' method implemented."))}}])&&o(e.prototype,n),s&&o(e,s),t}();t.exports=s},function(t,e,n){var o=n(5);"string"==typeof o&&(o=[[t.i,o,""]]);n(7)(o,{});o.locals&&(t.exports=o.locals)},function(t,e,n){(t.exports=n(6)()).push([t.i,"@keyframes scaleout{0%{transform:scale(0)}100%{transform:scale(1);opacity:0}}.batmap__spinner{position:absolute;top:0;right:0;bottom:0;left:0;content:'';width:50px;height:50px;margin:auto;padding:50px 0 0 50px;background-color:#333;border-radius:100%;animation:scaleout 1s infinite ease-in-out}.batmap__map{position:relative;z-index:0}.batmap-mappy .mappy-control-zoom a span{position:relative;top:-5px}.batmap-mappy .leaflet-control.leaflet-control-attribution,.batmap-mappy .leaflet-control.leaflet-control-scale{padding:0 5px}.batmap-leaflet.leaflet-touch .leaflet-bar a{line-height:26px}",""])},function(t,e){t.exports=function(){var t=[];return t.toString=function(){for(var t=[],e=0;e<this.length;e++){var n=this[e];n[2]?t.push("@media "+n[2]+"{"+n[1]+"}"):t.push(n[1])}return t.join("")},t.i=function(e,n){"string"==typeof e&&(e=[[null,e,""]]);for(var o={},r=0;r<this.length;r++){var i=this[r][0];"number"==typeof i&&(o[i]=!0)}for(r=0;r<e.length;r++){var s=e[r];"number"==typeof s[0]&&o[s[0]]||(n&&!s[2]?s[2]=n:n&&(s[2]="("+s[2]+") and ("+n+")"),t.push(s))}},t}},function(t,e){var n={},o=function(t){var e;return function(){return void 0===e&&(e=t.apply(this,arguments)),e}},r=o(function(){return/msie [6-9]\b/.test(window.navigator.userAgent.toLowerCase())}),i=o(function(){return document.head||document.getElementsByTagName("head")[0]}),s=null,a=0;function c(t,e){for(var o=0;o<t.length;o++){var r=t[o],i=n[r.id];if(i){i.refs++;for(var s=0;s<i.parts.length;s++)i.parts[s](r.parts[s]);for(;s<r.parts.length;s++)i.parts.push(f(r.parts[s],e))}else{var a=[];for(s=0;s<r.parts.length;s++)a.push(f(r.parts[s],e));n[r.id]={id:r.id,refs:1,parts:a}}}}function u(t){for(var e=[],n={},o=0;o<t.length;o++){var r=t[o],i=r[0],s={css:r[1],media:r[2],sourceMap:r[3]};n[i]?n[i].parts.push(s):e.push(n[i]={id:i,parts:[s]})}return e}function l(){var t=document.createElement("style"),e=i();return t.type="text/css",e.appendChild(t),t}function f(t,e){var n,o,r,c,u;if(e.singleton){var f=a++;n=s||(s=l()),o=h.bind(null,n,f,!1),r=h.bind(null,n,f,!0)}else t.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(c=document.createElement("link"),u=i(),c.rel="stylesheet",u.appendChild(c),o=function(t,e){var n=e.css,o=(e.media,e.sourceMap);o&&(n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+" */");var r=new Blob([n],{type:"text/css"}),i=t.href;t.href=URL.createObjectURL(r),i&&URL.revokeObjectURL(i)}.bind(null,n=c),r=function(){n.parentNode.removeChild(n),n.href&&URL.revokeObjectURL(n.href)}):(n=l(),o=function(t,e){var n=e.css,o=e.media;e.sourceMap;o&&t.setAttribute("media",o);if(t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}.bind(null,n),r=function(){n.parentNode.removeChild(n)});return o(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;o(t=e)}else r()}}t.exports=function(t,e){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");void 0===(e=e||{}).singleton&&(e.singleton=r());var o=u(t);return c(o,e),function(t){for(var r=[],i=0;i<o.length;i++){var s=o[i];(a=n[s.id]).refs--,r.push(a)}t&&c(u(t),e);for(i=0;i<r.length;i++){var a;if(0===(a=r[i]).refs){for(var l=0;l<a.parts.length;l++)a.parts[l]();delete n[a.id]}}}};var p,d=(p=[],function(t,e){return p[t]=e,p.filter(Boolean).join("\n")});function h(t,e,n,o){var r=n?"":o.css;if(t.styleSheet)t.styleSheet.cssText=d(e,r);else{var i=document.createTextNode(r),s=t.childNodes;s[e]&&t.removeChild(s[e]),s.length?t.insertBefore(i,s[e]):t.appendChild(i)}}},function(t,e,n){"use strict";t.exports={delete:function(t,e){try{delete t[e]}catch(n){t[e]=void 0}},addEventListener:function(t,e,n,o){t.addEventListener?t.addEventListener(e,n,o):t.attachEvent("on"+e,n)},addLoadListener:function(t,e){t.onreadystatechange=function(){"complete"===this.readyState&&e()},t.onload=e}}},function(t,e,n){"use strict";t.exports={isAString:function(t){return"string"==typeof t},isAFunction:function(t){return"function"==typeof t}}},function(t,e,n){!function(t){"use strict";var e=t.isEmpty=function(t){return void 0===t||(null===t||(!!p(t)||(""===t||0!==t&&(!1!==t&&(!d(t)&&(!m(t)&&(!!g(t)||!!f(t))))))))},n=t.isNotEmpty=function(t){return!e(t)},o=t.isDefined=function(t){return void 0!==t&&(null!==t&&(!p(t)&&(""===t||(0===t||(!1===t||(!!v(t)||(u(t),!0)))))))},r=t.isNotDefined=function(t){return!o(t)},i=(t.isTrue=function(t){return!0===t||(1===t||(!(!t||"string"!=typeof t||"true"!==t.toLowerCase())||!(!t||"string"!=typeof t||"t"!==t.toLowerCase())))},t.isFalse=function(t){return!1===t||(0===t||(!(!t||"string"!=typeof t||"false"!==t.toLowerCase())||!(!t||"string"!=typeof t||"f"!==t.toLowerCase())))},t.assertIsDefined=function(t,e){if(r(e))throw new Error(t+" is not defined.")},t.assertIsNotDefined=function(t,e){if(o(e))throw new Error(t+" is defined.")},t.assertIsNotEmpty=function(t,n){if(e(n))throw new Error(t+" is empty.")},t.assertIsEmpty=function(t,e){if(n(e))throw new Error(t+" is not empty.")},t.validateFunctionInputsAreDefined=function(t,e,n){return s(t,e,"fnInputs",n)}),s=t.validateInputsAreDefined=function(t,n,o,i){if(i+=" validateInputsAreDefined ",e(t))throw new Error(i+o+" must not be empty");if(!u(n))throw new Error(i+"inputsToValidate must be an array");for(var s=0;s<n.length;s++){var a=n[s],c=b(t,a);if(r(c))throw new Error(i+"following input must be defined: "+o+"."+a)}},a=(t.validateFunctionInputsAreDefinedAsync=function(t,e,n,o){try{return i(t,e,n),o(null,"done")}catch(t){return o(t,null)}},t.validateFunctionInputsAreDefinedCallbackOnError=function(t,e,n,o){try{return void i(t,e,n)}catch(t){return o(t,null)}},t.validateInputsAreDefinedAsync=function(t,e,n,o,r){try{return s(t,e,n,o),r(null,"done")}catch(t){return r(t,null)}},t.validateInputsAreDefinedCallbackOnError=function(t,e,n,o,r){try{return void s(t,e,n,o)}catch(t){return r(t,null)}},t.validateFunctionInputsAreNotEmpty=function(t,e,n){return c(t,e,"fnInputs",n)}),c=t.validateInputsAreNotEmpty=function(t,n,o,r){if(r+=" validateInputsAreNotEmpty ",e(t))throw new Error(r+o+" must not be empty");if(!u(n))throw new Error(r+"inputsToValidate must be an array");for(var i=0;i<n.length;i++){var s=n[i],a=b(t,s);if(e(a))throw new Error(r+"following input must not be empty: "+o+"."+s)}},u=(t.validateFunctionInputsAreNotEmptyAsync=function(t,e,n,o){try{return a(t,e,n),o(null,"done")}catch(t){return o(t,null)}},t.validateFunctionInputsAreNotEmptyCallbackOnError=function(t,e,n,o){try{return void a(t,e,n)}catch(t){return o(t,null)}},t.validateInputsAreNotEmptyAsync=function(t,e,n,o,r){try{return c(t,e,n,o),r(null,"done")}catch(t){return r(t,null)}},t.validateInputsAreNotEmptyCallbackOnError=function(t,e,n,o,r){try{return void c(t,e,n,o)}catch(t){return r(t,null)}},t.isArray=function(t){return!!(t&&"object"==typeof t&&void 0!==t.length&&t.length>=0)}),l=t.isNotArray=function(t){return!u(t)},f=t.isEmptyArray=function(t){return!(!u(t)||void 0===t.length||0!==t.length)},p=(t.isNotEmptyArray=function(t){return!!(u(t)&&void 0!==t.length&&t.length>0)},t.isNAN=function(t){return!("number"!=typeof t||!isNaN(t))}),d=t.isDate=function(t){return"object"==typeof t&&"[object Date]"===Object.prototype.toString.call(t)},h=t.isNotDate=function(t){return!d(t)},m=t.isError=function(t){return"object"==typeof t&&"[object Error]"===Object.prototype.toString.call(t)},y=t.isNotError=function(t){return!m(t)},v=t.isObject=function(t){return!!(t&&"object"==typeof t&&l(t)&&h(t)&&y(t))},g=(t.isNotObject=function(t){return!v(t)},t.isEmptyObject=function(t){return!(!v(t)||0!==Object.keys(t).length)}),b=(t.isNotEmptyObject=function(t){return!!(v(t)&&Object.keys(t).length>0)},t.getPropertyByString=function(t,n){if(e(n))return t;var o,r=n.split("."),i=r.length-1,s=0;for(s=0;s<i&&(o=r[s],"object"==typeof t&&null!==t&&o in t);s++)t=t[o];return t[r[s]]}),k=(t.setPropertyByString=function(t,n,o){if(e(n))return t;var r,i=n.split("."),s=i.length-1;if(0===s)t[n]=o;else{for(var a=0;a<=s-1;a++)r=i[a],"object"==typeof t&&null!==t&&r in t?t=t[r]:(t[r]={},t=t[r]);r=i[a],"object"==typeof t&&null!==t&&(t[r]=o)}},t.assertNestedListIsDefined=function(t){return!l(t)&&(t.forEach(function(t){k.apply(null,t)}),!0)},t.assertNestedIsDefined=function(t,e){for(var n=Array.prototype.slice.call(arguments,2),o=0;o<n.length;o++){if(!t)throw new Error(e+" is not defined.");if(!t.hasOwnProperty(n[o])||r(t[n[o]]))throw new Error(e+"."+n[o]+" is not defined.");t=t[n[o]],e=e+"."+n[o]}return!0})}(e)},function(t,e,n){"use strict";var o=n(2),r=[ReferenceError,TypeError,RangeError],i=!1;function s(){i=!1,o._l=null,o._m=null}function a(t,e){return e.some(function(e){return t instanceof e})}e.disable=s,e.enable=function(t){t=t||{},i&&s();i=!0;var e=0,n=0,c={};function u(e){(t.allRejections||a(c[e].error,t.whitelist||r))&&(c[e].displayId=n++,t.onUnhandled?(c[e].logged=!0,t.onUnhandled(c[e].displayId,c[e].error)):(c[e].logged=!0,function(t,e){console.warn("Possible Unhandled Promise Rejection (id: "+t+"):"),((e&&(e.stack||e))+"").split("\n").forEach(function(t){console.warn("  "+t)})}(c[e].displayId,c[e].error)))}o._l=function(e){2===e._i&&c[e._o]&&(c[e._o].logged?function(e){c[e].logged&&(t.onHandled?t.onHandled(c[e].displayId,c[e].error):c[e].onUnhandled||(console.warn("Promise Rejection Handled (id: "+c[e].displayId+"):"),console.warn('  This means you can ignore any previous messages of the form "Possible Unhandled Promise Rejection" with id '+c[e].displayId+".")))}(e._o):clearTimeout(c[e._o].timeout),delete c[e._o])},o._m=function(t,n){0===t._h&&(t._o=e++,c[t._o]={displayId:null,error:n,timeout:setTimeout(u.bind(null,t._o),a(n,r)?100:2e3),logged:!1})}}},function(t,e,n){"use strict";(function(e){function n(t){r.length||(o(),!0),r[r.length]=t}t.exports=n;var o,r=[],i=0,s=1024;function a(){for(;i<r.length;){var t=i;if(i+=1,r[t].call(),i>s){for(var e=0,n=r.length-i;e<n;e++)r[e]=r[e+i];r.length-=i,i=0}}r.length=0,i=0,!1}var c,u,l,f=void 0!==e?e:self,p=f.MutationObserver||f.WebKitMutationObserver;function d(t){return function(){var e=setTimeout(o,0),n=setInterval(o,50);function o(){clearTimeout(e),clearInterval(n),t()}}}"function"==typeof p?(c=1,u=new p(a),l=document.createTextNode(""),u.observe(l,{characterData:!0}),o=function(){c=-c,l.data=c}):o=d(a),n.requestFlush=o,n.makeRequestCallFromTimer=d}).call(this,n(13))},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){"use strict";var o=n(2);t.exports=o;var r=l(!0),i=l(!1),s=l(null),a=l(void 0),c=l(0),u=l("");function l(t){var e=new o(o._n);return e._i=1,e._j=t,e}o.resolve=function(t){if(t instanceof o)return t;if(null===t)return s;if(void 0===t)return a;if(!0===t)return r;if(!1===t)return i;if(0===t)return c;if(""===t)return u;if("object"==typeof t||"function"==typeof t)try{var e=t.then;if("function"==typeof e)return new o(e.bind(t))}catch(t){return new o(function(e,n){n(t)})}return l(t)},o.all=function(t){var e=Array.prototype.slice.call(t);return new o(function(t,n){if(0===e.length)return t([]);var r=e.length;function i(s,a){if(a&&("object"==typeof a||"function"==typeof a)){if(a instanceof o&&a.then===o.prototype.then){for(;3===a._i;)a=a._j;return 1===a._i?i(s,a._j):(2===a._i&&n(a._j),void a.then(function(t){i(s,t)},n))}var c=a.then;if("function"==typeof c)return void new o(c.bind(a)).then(function(t){i(s,t)},n)}e[s]=a,0==--r&&t(e)}for(var s=0;s<e.length;s++)i(s,e[s])})},o.reject=function(t){return new o(function(e,n){n(t)})},o.race=function(t){return new o(function(e,n){t.forEach(function(t){o.resolve(t).then(e,n)})})},o.prototype.catch=function(t){return this.then(null,t)}},function(t,e,n){"use strict";t.exports={addLoader:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=document.createElement("div");return o.className="string"==typeof n?n:"batmap__spinner",t.appendChild(o),function(){t.removeChild(o),e()}}}},,,,,,function(t,e,n){"use strict";function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function i(t,e){return!e||"object"!==o(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var c,u=n(3),l=n(1),f=n(15),p=n(0),d=function(t){function e(){var t,n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return(n=i(this,(t=s(e)).call.apply(t,[this].concat(r)))).provider="Leaflet",n}var n,o,d;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}(e,u),n=e,(o=[{key:"load",value:function(t){var e=this;this.domElement.classList.add("batmap__map","batmap-leaflet"),window.L?t():(t=f.addLoader(this.domElement,t),l.addResources(document.head,[l.createStyle("//unpkg.com/leaflet@1.5.1/dist/leaflet.css"),l.createScript("//unpkg.com/leaflet@1.5.1/dist/leaflet.js")],function(){var n=[];e.showCluster&&(n.push(l.createStyle("//unpkg.com/leaflet.markercluster@1.1.0/dist/MarkerCluster.css")),n.push(l.createStyle("//unpkg.com/leaflet.markercluster@1.1.0/dist/MarkerCluster.Default.css")),n.push(l.createScript("//unpkg.com/leaflet.markercluster@1.1.0/dist/leaflet.markercluster.js"))),l.addResources(document.head,n,function(){c=window.L,t()})}))}},{key:"setMapOptions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};this.mapOptions=p({center:[0,0],zoom:12,locationZoom:16,tileLayerProvider:"//{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",tileLayerOptions:{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a>',maxZoom:19}},t),this.markersOptions=e,this.labelsOptions=n,this.clustersOptions=o}},{key:"initMap",value:function(){this.bounds=new c.latLngBounds([]),this.map=c.map(this.domElement,this.mapOptions),c.tileLayer(this.mapOptions.tileLayerProvider,this.mapOptions.tileLayerOptions).addTo(this.map)}},{key:"setPoint",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o={position:c.latLng(t.localisation.coordinates.latitude,t.localisation.coordinates.longitude),id:"".concat(t._id),location:t,iconType:e};this.showLabel&&n&&(o.label="".concat(n)),this.points.push(o)}},{key:"addMarkers",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.showCluster&&this.icons.cluster&&this.addCluster(),[].forEach.call(this.points,function(n){t.addMarker(n,e)})}},{key:"addMarker",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=c.marker(t.position,t);n.id=t.id,n.location=t.location,this.setIconOnMarker(n,t.iconType),this.showCluster&&this.icons.cluster?this.cluster.addLayer(n):n.addTo(this.map),[].forEach.call(Object.keys(e),function(t){var o=e[t];n.on(t,o(n))}),this.extendBounds(n.getLatLng()),this.markers.push(n)}},{key:"removeMarker",value:function(t){(t=this.getMarker(t)).removeFrom(this.map),this.markers=this.markers.filter(function(e){return e.id!==t.id})}},{key:"setMarkerIcons",value:function(){var t=this;Object.keys(this.markersOptions).forEach(function(e){var n=t.markersOptions[e],o=n.anchor||[n.width/2,n.height],r=n.label||{};t.icons[e]=new c.Icon({className:"batmap-marker-".concat(e),iconUrl:n.url,iconSize:[n.width,n.height],iconAnchor:o,labelOptions:t.getLabelOptions(r)})})}},{key:"getLabelOptions",value:function(t){return{origin:t.origin||this.labelsOptions.origin||[t.width/2,t.height/2],color:t.color||this.labelsOptions.color,font:t.font||this.labelsOptions.font,size:t.size||this.labelsOptions.size,weight:t.weight||this.labelsOptions.weight}}},{key:"setIconOnMarker",value:function(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];t=this.getMarker(t);var o=this.icons[e];if(t&&o)if(t.iconType=e,this.showLabel&&n){var r=o.options.labelOptions,i=document.createElement("span");i.innerText=t.options.label,i.style.position="absolute",i.style.top="".concat(r.origin[0],"px"),i.style.left="".concat(r.origin[1],"px"),i.style.transform="translate(-50%, -50%)",i.style.color="".concat(r.color),i.style.fontFamily="".concat(r.font),i.style.fontWeight="".concat(r.weight),i.style.fontSize="".concat(r.size,"px"),t.setIcon(new c.DivIcon({className:o.options.className,iconSize:o.options.iconSize,iconAnchor:o.options.iconAnchor,html:'<img src="'.concat(o.options.iconUrl,'" class="map-marker-').concat(e,'__image">').concat(i.outerHTML)}))}else t.setIcon(o)}},{key:"focusOnMarker",value:function(t){t=this.getMarker(t),this.panTo(t.getLatLng())}},{key:"addUserMarker",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;t&&(this.userMarker=new c.marker(c.latLng(t.latitude,t.longitude)),this.userMarker.id=n,this.userMarker.addTo(this.map),this.setIconOnMarker(this.userMarker,e,!1),this.extendBounds(this.userMarker.getLatLng()))}},{key:"addCluster",value:function(){var t=this.icons.cluster;this.cluster=c.markerClusterGroup(p({showCoverageOnHover:!1,zoomToBoundsOnClick:!0,spiderfyOnMaxZoom:!0,iconCreateFunction:function(e){var n=t.options.labelOptions,o=document.createElement("span");return o.innerText=e.getChildCount(),o.style.position="absolute",o.style.top="".concat(n.origin[0],"px"),o.style.left="".concat(n.origin[1],"px"),o.style.transform="translate(-50%, -50%)",o.style.color="".concat(n.color),o.style.fontFamily="".concat(n.font),o.style.fontWeight="".concat(n.weight),o.style.fontSize="".concat(n.size,"px"),c.divIcon({className:t.options.className,html:'<img src="'.concat(t.options.iconUrl,'" class="map-marker-cluster__image">')+o.outerHTML,iconSize:t.options.iconSize})}},this.clustersOptions)),this.map.addLayer(this.cluster)}},{key:"setZoom",value:function(t){this.map.setZoom(t)}},{key:"setCenter",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.mapOptions.zoom;this.map.setView(t,e)}},{key:"getBounds",value:function(){return this.bounds}},{key:"extendBounds",value:function(t){return this.bounds.extend(t)}},{key:"fitBounds",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.mapOptions.zoom;this.markers.length>1?this.map.fitBounds(t,{padding:c.point(50,50),maxZoom:e}):this.setCenter(this.markers[0].getLatLng(),e)}},{key:"panTo",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.mapOptions.locationZoom;this.map.flyTo(t,e)}},{key:"listenZoomChange",value:function(t){var e=this;this.map.on("zoomend",function(){return t(e.map.getZoom())})}},{key:"minifyMarkerIcons",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.8;t<n+1&&!this.isMinifiedMarkerIcons?([].forEach.call(Object.keys(this.icons),function(t){var n=e.icons[t].options.iconSize;e.icons[t].options.iconSize=[n[0]*o,n[1]*o]}),this.isMinifiedMarkerIcons=!0,this.updateAllMarkerIconsOnMap()):t>n&&this.isMinifiedMarkerIcons&&([].forEach.call(Object.keys(this.icons),function(t){var n=e.icons[t].options.iconSize;e.icons[t].options.iconSize=[n[0]/o,n[1]/o]}),this.isMinifiedMarkerIcons=!1,this.updateAllMarkerIconsOnMap())}},{key:"updateAllMarkerIconsOnMap",value:function(){var t=this;[].forEach.call(this.markers,function(e){t.setIconOnMarker(e,e.iconType,!1)}),this.userMarker&&this.setIconOnMarker(this.userMarker,this.userMarker.iconType,!1)}}])&&r(n.prototype,o),d&&r(n,d),e}();window.LeafletMap=d,window.BatMap=d}]);